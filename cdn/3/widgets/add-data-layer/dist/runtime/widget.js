System.register(["jimu-core","jimu-ui","jimu-core/react","jimu-arcgis","esri/renderers","esri/Color","jimu-ui/advanced/map","esri/symbols/SimpleFillSymbol","esri/layers/FeatureLayer"],(function(e,t){var a={},o={},r={},n={},i={},l={},s={},c={},d={};return{setters:[function(e){a.DataSourceManager=e.DataSourceManager,a.DataSourceStatus=e.DataSourceStatus,a.DataSourceTypes=e.DataSourceTypes,a.DataSourcesChangeMessage=e.DataSourcesChangeMessage,a.DataSourcesChangeType=e.DataSourcesChangeType,a.Immutable=e.Immutable,a.MessageManager=e.MessageManager,a.React=e.React,a.ReactRedux=e.ReactRedux,a.ServiceManager=e.ServiceManager,a.SupportedLayerServiceTypes=e.SupportedLayerServiceTypes,a.classNames=e.classNames,a.css=e.css,a.dataSourceUtils=e.dataSourceUtils,a.defaultMessages=e.defaultMessages,a.esri=e.esri,a.getAppStore=e.getAppStore,a.hooks=e.hooks,a.i18n=e.i18n,a.loadArcGISJSAPIModule=e.loadArcGISJSAPIModule,a.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules,a.requestUtils=e.requestUtils,a.uuidv1=e.uuidv1},function(e){o.Alert=e.Alert,o.Button=e.Button,o.Dropdown=e.Dropdown,o.DropdownButton=e.DropdownButton,o.DropdownItem=e.DropdownItem,o.DropdownMenu=e.DropdownMenu,o.Icon=e.Icon,o.Input=e.Input,o.Label=e.Label,o.Loading=e.Loading,o.LoadingType=e.LoadingType,o.Tab=e.Tab,o.Tabs=e.Tabs,o.UrlInput=e.UrlInput,o.defaultMessages=e.defaultMessages},function(e){r.default=e.default,r.useEffect=e.useEffect,r.useMemo=e.useMemo,r.useRef=e.useRef,r.useState=e.useState},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){i.SimpleRenderer=e.SimpleRenderer},function(e){l.default=e.default},function(e){s.JimuSymbolType=e.JimuSymbolType,s.SymbolSelector=e.SymbolSelector},function(e){c.default=e.default},function(e){d.default=e.default}],execute:function(){e((()=>{var e={26:e=>{"use strict";e.exports=c},56:(e,t,a)=>{"use strict";e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},72:e=>{"use strict";var t=[];function a(e){for(var a=-1,o=0;o<t.length;o++)if(t[o].identifier===e){a=o;break}return a}function o(e,o){for(var n={},i=[],l=0;l<e.length;l++){var s=e[l],c=o.base?s[0]+o.base:s[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var p=a(u),g={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var m=r(g,o);o.byIndex=l,t.splice(l,0,{identifier:u,updater:m,references:1})}i.push(u)}return i}function r(e,t){var a=t.domAPI(t);a.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<n.length;i++){var l=a(n[i]);t[l].references--}for(var s=o(e,r),c=0;c<n.length;c++){var d=a(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=s}}},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},149:e=>{"use strict";e.exports=i},224:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var o=a(601),r=a.n(o),n=a(314),i=a.n(n)()(r());i.push([e.id,".font-14{font-size:14px;color:var(--dark-800)}.font-16{font-size:16px;font-weight:500}.upload-loading-container{position:absolute;top:0;bottom:0;right:0;left:0;background-color:var(--white);z-index:2}.upload-loading-content{position:absolute;top:0;bottom:60px;right:0;left:0}.upload-loading-file-name{position:absolute;width:200px;height:100px;right:calc(50% - 100px);top:80px;word-break:break-all;overflow:hidden}.upload-loading-btn{position:absolute;width:200px;height:32px;right:calc(50% - 100px);top:calc(50% + 80px);button.btn-danger{background-color:var(--danger-500);border:0}}.supported-types{font-size:13px}.drag-area-container{width:100%;height:280px}.drag-area{border:2px dashed var(--light-400);padding-top:50%;width:100%;height:100%;user-select:none;text-align:center}.upload-btn{border:1px solid var(--light-400);color:var(--dark-800);background-color:var(--white);border-radius:2px;line-height:28px;padding-left:16px;padding-right:16px;height:30px;user-select:none;max-width:100%}.upload-btn-container:hover{.upload-btn{background-color:var(--light-200) !important}}.drag-area-container,.upload-btn-container{position:relative;display:inline-block;z-index:1}.upload-btn-file-input:disabled{cursor:not-allowed;opacity:0}.upload-btn-file-input,.drag-area-file-input{position:absolute;left:0;right:0;top:0;bottom:0;opacity:0}.upload-btn-file-input{cursor:pointer}.data-item{width:100%;overflow:hidden}.data-item-loading{position:relative;width:24px;height:24px;border:1px solid #0095db}.data-thumbnail{width:26px;height:26px;background-color:#0095db}.data-label{font-size:13px;color:var(--dark-800)}.padding-all{padding:10px}.padding-all-20{padding:20px}.padding-top-20{padding-top:20px}.padding-bottom-20{padding-bottom:20px}.padding-top{padding-top:10px}.padding-bottom{padding-bottom:15px}.padding-right{padding-right:10px}.padding-left{padding-left:10px}.symbol-selector{width:30px;height:26px}.centered-container{display:flex;justify-content:center;align-items:center;flex-direction:column}.centered-container-row-flex{display:flex;justify-content:center;align-items:center;flex-direction:row}.add-data-styler-widget-container{overflow-y:auto}@media(max-height: 800px){.add-data-styler-widget-container{max-height:100%}}.upload-loading-container-url{background-color:rgba(0, 0, 0, 0.3);position:absolute;top:0;bottom:0;right:0;left:0}.upload-loading-content-url{position:absolute;top:0;bottom:60px;right:0;left:0}.upload-loading-url{.donut-loading{background-color:var(--white)}}.sample-url{font-style:italic;font-weight:400;font-size:13px;word-break:break-all}.url-input.with-error{margin-bottom:60px}.url-input-label{font-size:13px;font-weight:500;margin-bottom:8px;color:var(--dark-800)}",""]);const l=i},244:e=>{"use strict";e.exports=a},254:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC44Ij4KPHBhdGggZD0iTTE1LjI5IDFIM1YyM0gyMVY2LjcwOUwxNS4yOSAxWk0yMCAyMkg0VjJIMTRWOEgyMFYyMlpNMjAgN0gxNVYySDE1LjJMMjAgNi44VjdaTTE0IDExSDEwVjEwSDdWMTNIOFYxN0g3VjIwSDEwVjE5SDE0VjIwSDE3VjE3SDE2VjEzSDE3VjEwSDE0VjExWk0xNiAxMVYxMkgxNVYxMUgxNlpNOCAxMUg5VjEySDhWMTFaTTkgMTlIOFYxOEg5VjE5Wk0xNiAxOUgxNVYxOEgxNlYxOVpNMTUgMTdIMTRWMThIMTBWMTdIOVYxM0gxMFYxMkgxNFYxM0gxNVYxN1oiIGZpbGw9IiMwNzZGRTUiLz4KPC9nPgo8L3N2Zz4K"},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",o=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),o&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),o&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,o,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(i[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&i[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),a&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=a):d[2]=a),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},321:e=>{"use strict";e.exports=o},442:e=>{"use strict";e.exports=l},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{"use strict";e.exports=function(e){return e[1]}},605:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNy4wMDAxIDEzLjAxOFY5LjY5OUwxOS4zMDAxIDJINS4wMDAwN1YxMy4wMThIMi4wMTgwN1YyNy45ODJINS4wMDAwN1YzMEgyNy4wMDAxVjI3Ljk4MkgyOS45ODIxVjEzLjAxOEgyNy4wMDAxWk0xOS4wMDAxIDNMMjYuMDAwMSAxMEgxOS4wMDAxVjNaTTYuMDAwMDcgM0gxOC4wMDAxVjExSDI2LjAwMDFWMTMuMDE4SDYuMDAwMDdWM1pNMjYuMDAwMSAyOUg2LjAwMDA3VjI3Ljk4MkgyNi4wMDAxVjI5Wk0yOS4wMTgxIDI3LjAxOEgyLjk4MjA3VjEzLjk4MkgyOS4wMTgxVjI3LjAxOFpNOC44NTAwNyAyMy4yNjhDOC4wMjE5MSAyMi40NzAyIDcuNjg5MTMgMjEuMjg3NCA3Ljk3OTgyIDIwLjE3NDlDOC4yNzA1MSAxOS4wNjIzIDkuMTM5MzYgMTguMTkzNCAxMC4yNTE5IDE3LjkwMjhDMTEuMzY0NSAxNy42MTIxIDEyLjU0NzMgMTcuOTQ0OCAxMy4zNDUxIDE4Ljc3M0wxMi42MzgxIDE5LjQ4QzEyLjA4ODggMTguOTIzNCAxMS4yODMzIDE4LjcwMzggMTAuNTI3NSAxOC45MDQ2QzkuNzcxNzYgMTkuMTA1NCA5LjE4MTUzIDE5LjY5NTggOC45ODA5NyAyMC40NTE3QzguNzgwNCAyMS4yMDc1IDkuMDAwMjYgMjIuMDEyOSA5LjU1NzA3IDIyLjU2MkMxMC40MTg3IDIzLjM4NTQgMTEuNzc1NSAyMy4zODU0IDEyLjYzNzEgMjIuNTYyTDEzLjM0NTEgMjMuMjY5QzEyLjc0OTIgMjMuODY1NCAxMS45NDA3IDI0LjIwMDUgMTEuMDk3NiAyNC4yMDA1QzEwLjI1NDUgMjQuMjAwNSA5LjQ0NTk1IDIzLjg2NDQgOC44NTAwNyAyMy4yNjhaTTIyLjA0MDEgMjMuOTg0TDE5LjY2NjEgMThIMjAuNzQyMUwyMi41MTAxIDIyLjQ1M0wyNC4zMDQxIDE4SDI1LjM4MjFMMjIuOTcwMSAyMy45ODZMMjIuMDQwMSAyMy45ODRaTTE3Ljk2NjEgMjIuNDYxQzE4LjA1MDggMjIuMjM3NiAxOC4wMzU4IDIxLjk4ODcgMTcuOTI1MSAyMS43NzdDMTcuNjg5MiAyMS40OTQgMTcuMzQ2OCAyMS4zMjE0IDE2Ljk3OTEgMjEuM0MxNS42OTAxIDIxLjEwMiAxNS4wMjYxIDIwLjUxNiAxNS4wMDUxIDE5LjU1N0MxNC45OTY0IDE5LjEwODYgMTUuMTY5NSAxOC42NzU3IDE1LjQ4NTEgMTguMzU3QzE1LjgyNTEgMTguMDAyOSAxNi4yOTQyIDE3LjgwMTkgMTYuNzg1MSAxNy44QzE3LjU3NTUgMTcuNzgyIDE4LjMwOTYgMTguMjA3MyAxOC42ODcxIDE4LjkwMkwxNy44MzYxIDE5LjQyOEMxNy42NDA4IDE5LjAyOTYgMTcuMjI5NCAxOC43ODM2IDE2Ljc4NjEgMTguOEMxNi41NjY4IDE4LjggMTYuMzU3MSAxOC44OSAxNi4yMDYxIDE5LjA0OUMxNi4wNzc4IDE5LjE3NDIgMTYuMDA1NCAxOS4zNDU4IDE2LjAwNTEgMTkuNTI1QzE2LjAwOTEgMTkuNzMxIDE2LjAxOTEgMjAuMTQxIDE3LjEzMTEgMjAuMzExQzE3Ljc5ODIgMjAuMzU5NCAxOC40MDY3IDIwLjcxIDE4Ljc4MzEgMjEuMjYzQzE5LjA0NzYgMjEuNzI5OCAxOS4wOTM2IDIyLjI4OTIgMTguOTA5MSAyMi43OTNDMTguNTU4MiAyMy42MzI3IDE3LjcxMzQgMjQuMTU3NiAxNi44MDUxIDI0LjFDMTUuOTEwMyAyNC4xMzU5IDE1LjA3NDggMjMuNjUzMiAxNC42NTkxIDIyLjg2TDE1LjUyMzEgMjIuMzU1QzE1Ljc2MTYgMjIuODM4NyAxNi4yNjY4IDIzLjEzMjMgMTYuODA1MSAyMy4xQzE3LjI4NzIgMjMuMTQ4NyAxNy43NDkxIDIyLjg5MzggMTcuOTY1MSAyMi40NkwxNy45NjYxIDIyLjQ2MVpNNC41MDAwNyAyMy41QzQuNTAwMDcgMjIuOTQ3NyA0Ljk0Nzc4IDIyLjUgNS41MDAwNyAyMi41QzYuMDUyMzUgMjIuNSA2LjUwMDA3IDIyLjk0NzcgNi41MDAwNyAyMy41QzYuNTAwMDcgMjQuMDUyMyA2LjA1MjM1IDI0LjUgNS41MDAwNyAyNC41QzQuOTQ4MjQgMjQuNDk4OSA0LjUwMTE3IDI0LjA1MTggNC41MDAwNyAyMy41WiIgZmlsbD0iIzA3NkZFNSIvPgo8L3N2Zz4K"},633:e=>{"use strict";e.exports=d},659:e=>{"use strict";var t={};e.exports=function(e,a){var o=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(a)}},660:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgb3BhY2l0eT0iMC44Ij4KPHBhdGggZD0iTTMgMThIMlYxMUgzVjE1LjI5M0w1LjI5MyAxM0g2LjcwN0w0Ljg1IDE0Ljg1N0w3LjAwNiAxOEg1Ljc5M0w0LjEzMSAxNS41NzZMMyAxNi43MDdWMThaTTE2IDExVjE4SDE3VjExSDE2Wk04IDEzVjE4SDlWMTVDOSAxNC43MzQ4IDkuMTA1MzYgMTQuNDgwNCA5LjI5Mjg5IDE0LjI5MjlDOS40ODA0MyAxNC4xMDU0IDkuNzM0NzggMTQgMTAgMTRDMTAuMjY1MiAxNCAxMC41MTk2IDE0LjEwNTQgMTAuNzA3MSAxNC4yOTI5QzEwLjg5NDYgMTQuNDgwNCAxMSAxNC43MzQ4IDExIDE1VjE4SDEyVjE1QzEyIDE0LjczNDggMTIuMTA1NCAxNC40ODA0IDEyLjI5MjkgMTQuMjkyOUMxMi40ODA0IDE0LjEwNTQgMTIuNzM0OCAxNCAxMyAxNEMxMy4yNjUyIDE0IDEzLjUxOTYgMTQuMTA1NCAxMy43MDcxIDE0LjI5MjlDMTMuODk0NiAxNC40ODA0IDE0IDE0LjczNDggMTQgMTVWMThIMTVWMTVDMTUuMDAyMSAxNC41OTI3IDE0Ljg3OTIgMTQuMTk0NSAxNC42NDc5IDEzLjg1OTJDMTQuNDE2NiAxMy41MjM5IDE0LjA4OCAxMy4yNjc3IDEzLjcwNjUgMTMuMTI1QzEzLjMyNSAxMi45ODIzIDEyLjkwODggMTIuOTYgMTIuNTE0MyAxMy4wNjEzQzEyLjExOTcgMTMuMTYyNSAxMS43NjU3IDEzLjM4MjMgMTEuNSAxMy42OTFDMTEuMTk5NyAxMy4zMzcyIDEwLjc4MzYgMTMuMTAxNSAxMC4zMjU4IDEzLjAyNTlDOS44Njc5MyAxMi45NTAzIDkuMzk4MTEgMTMuMDM5NiA5IDEzLjI3OFYxM0g4Wk0yMSA2LjcwOVYyM0gzVjE5SDRWMjJIMjBWOEgxNFYySDRWMTBIM1YxSDE1LjI5TDIxIDYuNzA5Wk0yMCA2LjhMMTUuMiAySDE1VjdIMjBWNi44WiIgZmlsbD0iIzA3NkZFNSIvPgo8L2c+Cjwvc3ZnPgo="},662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},686:e=>{"use strict";e.exports=n},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var o="";a.supports&&(o+="@supports (".concat(a.supports,") {")),a.media&&(o+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(o+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),o+=a.css,r&&(o+="}"),a.media&&(o+="}"),a.supports&&(o+="}");var n=a.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},909:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxMyAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggb3BhY2l0eT0iMC42IiBkPSJNOS40IDBIMFYxNkgxM1YzLjZMOS40IDBaTTEyIDE1SDFWMUg4VjVIMTJWMTVaTTEyIDRIOVYxSDkuMzFMMTIgMy42OVY0WiIgZmlsbD0iIzA3NkZFNSIvPgo8L3N2Zz4K"},972:e=>{"use strict";e.exports=r},993:e=>{"use strict";e.exports=s}},t={};function u(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={id:a,exports:{}};return e[a](r,r.exports,u),r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var a in t)u.o(t,a)&&!u.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="",u.nc=void 0;var p={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(p),u.d(p,{__set_webpack_public_path__:()=>pe,default:()=>ue});var e=u(244),t=u(321),a=u(972),o=u(686),r=u(662),n=u.n(r),i=function(e,t){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(a[o[r]]=e[o[r]])}return a};const l=t=>{const a=window.SVG,{className:o}=t,r=i(t,["className"]),l=(0,e.classNames)("jimu-icon jimu-icon-component",o);return a?e.React.createElement(a,Object.assign({className:l,src:n()},r)):e.React.createElement("svg",Object.assign({className:l},r))};var s=u(149),c=u(442),d=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};function g(t){return e.DataSourceManager.getInstance().getDataSource(t)}function m(t,a,o,r){return d(this,arguments,void 0,(function*(t,a,o,r,n=!0){if(!t||0===t.length)return Promise.resolve([]);let i,l,d;if(t.some((e=>e.restLayer))){const t=yield(0,e.loadArcGISJSAPIModules)(["esri/layers/FeatureLayer","esri/Graphic","esri/layers/support/Field"]);i=t[0],l=t[1],d=t[2]}let u=new c.default(o),p=new c.default(r);console.log("number of data layers is ",t.length);const g=t.map((t=>{var a,o,r,n,c;if(t.restLayer&&i&&l&&d){console.log("constructing feature layer");let g=new s.SimpleRenderer;return"esriGeometryPolygon"!==t.restLayer.layerDefinition.geometryType&&"esriGeometryEnvelope"!==t.restLayer.layerDefinition.geometryType||(g={type:"simple",symbol:{type:"simple-fill",color:u,size:6,outline:{color:p,width:2}}}),"esriGeometryPolyline"===t.restLayer.layerDefinition.geometryType&&(u[3]=1,p[3]=1,g={type:"simple",symbol:{type:"simple-line",color:u,width:"4px"}}),"esriGeometryPoint"!==t.restLayer.layerDefinition.geometryType&&"esriGeometryMultipoint"!==t.restLayer.layerDefinition.geometryType||(u[3]=1,p[3]=1,g={type:"simple",symbol:{type:"simple-marker",size:10,color:u,outline:{width:.5,color:p}}}),{id:t.dataSourceJson.id,dataSourceJson:(0,e.Immutable)(t.dataSourceJson),layer:new i({source:(null===(o=null===(a=t.restLayer.featureSet)||void 0===a?void 0:a.features)||void 0===o?void 0:o.map((e=>l.fromJSON(e))))||[],objectIdField:null===(r=t.restLayer.layerDefinition)||void 0===r?void 0:r.objectIdField,fields:null===(c=null===(n=t.restLayer.layerDefinition)||void 0===n?void 0:n.fields)||void 0===c?void 0:c.map((e=>d.fromJSON(e))),sourceJSON:t.restLayer.layerDefinition,title:t.dataSourceJson.label||t.dataSourceJson.sourceLabel,renderer:g})}}return console.log("returning as DataSourceConstructorOptions"),{id:t.dataSourceJson.id,dataSourceJson:(0,e.Immutable)(t.dataSourceJson)}}));return Promise.allSettled(g.map((t=>e.DataSourceManager.getInstance().createDataSource(t).then((e=>e.isDataSourceSet&&!e.areChildDataSourcesCreated()?e.childDataSourcesReady().then((()=>e)):e))))).then((e=>e.filter((e=>"fulfilled"===e.status)).map((e=>e.value)))).then((o=>{if(n&&o.length>0){const t=new e.DataSourcesChangeMessage(a,e.DataSourcesChangeType.Create,o);e.MessageManager.getInstance().publishMessage(t)}return o.length<t.length?Promise.reject("Failed to create some data source."):(console.log("created data source in utils. data source manager contains:"),console.log(e.DataSourceManager.getInstance().getDataSourcesAsArray()),o)}))}))}function M(t,a,o=!0){const r=t.map((e=>g(e))).filter((e=>!!e));if(o&&r.length>0){const t=new e.DataSourcesChangeMessage(a,e.DataSourcesChangeType.Remove,r);e.MessageManager.getInstance().publishMessage(t)}return Promise.resolve().then((()=>{t.forEach((t=>{e.DataSourceManager.getInstance().destroyDataSource(t)}))}))}function y(e){var t;e.stopPropagation(),e.preventDefault(),null===(t=e.nativeEvent)||void 0===t||t.stopImmediatePropagation()}function f(e,t){return`add-data-${e}-${t}-${(new Date).getTime()}`}var v=u(993),S=u(26),h=u(72),D=u.n(h),I=u(825),x=u.n(I),N=u(659),E=u.n(N),j=u(56),T=u.n(j),A=u(540),w=u.n(A),b=u(113),L=u.n(b),z=u(224),O={};O.styleTagTransform=L(),O.setAttributes=T(),O.insert=E().bind(null,"head"),O.domAPI=x(),O.insertStyleElement=w();D()(z.A,O);z.A&&z.A.locals&&z.A.locals;const C=t=>{const o=new S.default({color:[246,154,10,.4],style:"solid",outline:{color:[246,154,10,1],width:1.5}}),[r,n]=(0,a.useState)(o);return(0,a.useEffect)((()=>{if(r){const e=new c.default(r.outline.color);t.setFillColour([r.color.r,r.color.g,r.color.b,r.color.a]),t.setOutlineColour([e.r,e.g,e.b,e.a])}}),[r]),e.React.createElement("div",{className:"padding-all centered-container"},e.React.createElement("span",{className:"font-14"},"Select colour"),e.React.createElement("div",{className:"symbol-selector"},e.React.createElement(v.SymbolSelector,{symbol:r,jimuSymbolType:v.JimuSymbolType.Polygon,btnSize:"default",onPolygonSymbolChanged:e=>{n(e)},isShowPreviewBtn:!0})))},R=e=>{const o={dataUploadSuccessful:{type:"success",title:"Success",text:e.textMessage,withIcon:!0},dataUploadFailed:{type:"error",title:"Warning",text:"Data upload failed. "+e.textMessage+" Close this message and try again.",withIcon:!1}};return a.default.createElement("div",{className:"widget-report-request-padding-top"},a.default.createElement(t.Alert,{"aria-live":"polite",closable:!0,form:"basic",onClose:e.onClose,open:!0,style:{width:300},text:o[e.responseType].text,title:o[e.responseType].title,type:o[e.responseType].type,withIcon:o[e.responseType].withIcon}))};var U,k=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};!function(e){e.CSV="csv",e.GeoJson="geojson",e.Shapefile="shapefile",e.KML="kml",e.GPX="gpx"}(U||(U={}));const Y=/iPad|iPhone|iPod/.test(window.navigator.userAgent)?void 0:Object.values(U).filter((e=>e!==U.GPX)).map((e=>F(e))).join(","),W={[U.CSV]:10485760,[U.GeoJson]:10485760,[U.Shapefile]:2097152,[U.KML]:10485760,[U.GPX]:10485760};var P;!function(e){e.NotSupportedType="The file type of {fileName} is not supported.",e.FailedToUpload="The file {fileName} cannot be successfully uploaded.",e.ExceedMaxSize="The file size exceeds the maximum ESRI limit (2 MB for a shapefile and 10 MB for all other file types).",e.ExceedMaxRecords="The number of records exceeds the maximum ESRI limit (1,000 for .csv files and 4,000 for all other files types)."}(P||(P={}));function F(e){return"shapefile"===e?".zip":`.${e}`}const V=o=>{const{portalUrl:r,widgetID:n,onAdd:i}=o,[s,c]=(0,a.useState)([187,187,187,.5]),[d,p]=(0,a.useState)([0,0,0,1]),[g,m]=(0,a.useState)(!1),[M,v]=(0,a.useState)([]),[S,h]=(0,a.useState)(!1),D=(0,a.useMemo)((()=>M.length>0?Math.max(...M.map((e=>e.order)))+1:0),[M]),I=(0,a.useMemo)((()=>`${n}-drag-to-upload`),[n]),x=(0,a.useMemo)((()=>`${n}-click-to-upload`),[n]),N=(0,a.useRef)(null),E=(0,a.useRef)([]),[j,T]=(0,a.useState)(null),[A,w]=(0,a.useState)(!1),[b,L]=(0,a.useState)(!1),z=(0,a.useRef)(),[O,V]=(0,a.useState)([]),Q=t=>k(void 0,void 0,void 0,(function*(){var a,o,i,l,s,c,d;if(t.target.files)try{m(!0);const o=function(t){const a=function(e){return Object.values(U).find((t=>null==e?void 0:e.endsWith(F(t))))}(t.name),o=t.name.replace(`.${a}`,""),r=new FormData;return r.set("file",t),r.set("filetype",a),r.set("f","json"),{id:(0,e.uuidv1)(),type:a,name:o,data:r,size:t.size}}(t.target.files[0]);if(N.current=o,console.log("uploading file info:"),console.log(N),!o.type)throw new Error(P.NotSupportedType);if(o.size>W[o.type])throw new Error(P.ExceedMaxSize);const i=yield function(t,a){return k(this,void 0,void 0,(function*(){var o,r,n,i,l,s,c,d,u;const p=yield(0,e.loadArcGISJSAPIModule)("esri/request");if(t.type===U.KML){const a=function(){var t,a,o;const r=null===(a=null===(t=(0,e.getAppStore)().getState())||void 0===t?void 0:t.portalSelf)||void 0===a?void 0:a.isPortal;if(r){return`${null===(o=(0,e.getAppStore)().getState())||void 0===o?void 0:o.portalUrl}/sharing/kml`}const n=window.jimuConfig.hostEnv;return`https://utility${"dev"===n?"devext":"qa"===n?"qa":""}.arcgis.com/sharing/kml`}(),r=yield function(e){return new Promise((t=>{const a=new FileReader;a.onload=e=>{t(e.target.result)},a.readAsText(e.data.get("file"))}))}(t),n=yield p(a,{query:{kmlString:encodeURIComponent(r),model:"simple",folders:""},responseType:"json"});return null===(o=null==n?void 0:n.data)||void 0===o?void 0:o.featureCollection}let g={};if(t.type!==U.GPX){const o=`${a}/sharing/rest/content/features/analyze`;t.data.set("analyzeParameters",JSON.stringify({enableGlobalGeocoding:!0,sourceLocale:null!==(n=null===(r=(0,e.getAppStore)().getState().appContext)||void 0===r?void 0:r.locale)&&void 0!==n?n:"en"}));const l=yield p(o,{body:t.data,method:"post"});t.data.delete("analyzeParameters"),g=null===(i=null==l?void 0:l.data)||void 0===i?void 0:i.publishParameters}const m=`${a}/sharing/rest/content/features/generate`;t.data.set("publishParameters",JSON.stringify(Object.assign(Object.assign({},g),{name:t.name})));const M=yield p(m,{body:t.data,method:"post"});return t.data.delete("publishParameters"),(null===(l=null==M?void 0:M.data)||void 0===l?void 0:l.featureCollection)&&(null===(d=null===(c=null===(s=null==M?void 0:M.data)||void 0===s?void 0:s.featureCollection)||void 0===c?void 0:c.layers)||void 0===d||d.forEach((e=>{var t,a;null===(a=null===(t=e.featureSet)||void 0===t?void 0:t.features)||void 0===a||a.forEach((t=>{var a,o;null===(o=null===(a=e.layerDefinition)||void 0===a?void 0:a.fields)||void 0===o||o.forEach((e=>{var a;const o=null===(a=t.attributes)||void 0===a?void 0:a[e.name];if("esriFieldTypeSmallInteger"===e.type){if("boolean"==typeof o)return void(t.attributes[e.name]=o?1:0);"number"!=typeof o&&(t.attributes[e.name]=null)}}))}))}))),null===(u=null==M?void 0:M.data)||void 0===u?void 0:u.featureCollection}))}(o,r);if(E.current.some((e=>e.id===o.id)))return void(E.current=E.current.filter((e=>e.id!==o.id)));(null===(a=null==i?void 0:i.layers)||void 0===a?void 0:a.length)>0&&v(i.layers.map(((t,a)=>{var r;return{dataSourceJson:{id:f(n,D+a),type:e.DataSourceTypes.FeatureLayer,sourceLabel:(null===(r=t.layerDefinition)||void 0===r?void 0:r.name)||(0===a?o.name:`${o.name} ${a}`)},order:D+a,restLayer:t}})))}catch(e){e.message===P.NotSupportedType?T(P.NotSupportedType.replace("{fileName}",null===(o=N.current)||void 0===o?void 0:o.name)):e.message===P.ExceedMaxSize||(null===(s=null===(l=null===(i=e.details)||void 0===i?void 0:i.messages)||void 0===l?void 0:l[0])||void 0===s?void 0:s.includes("max size"))?T(P.ExceedMaxSize):e.message===P.ExceedMaxRecords||(null===(c=e.message)||void 0===c?void 0:c.includes("maximum number"))?T(P.ExceedMaxRecords):(T(P.FailedToUpload.replace("{fileName}",null===(d=N.current)||void 0===d?void 0:d.name)),console.log(e))}finally{h(!0),m(!1),N.current=null,t.target.value=null,z.current&&z.current.focus()}}));(0,a.useEffect)((()=>{let e=[];M.forEach((t=>{t.restLayer.featureSet.features.length>0&&e.push(t)})),V(e)}),[M]),(0,a.useEffect)((()=>{S&&O.length>0&&(i(O,s,d),v([]),h(!1))}),[O,S]),(0,a.useEffect)((()=>{console.log("errMsg changed"),console.log(j),j&&j.length>0&&(w(!0),L(!0))}),[j]);return e.React.createElement("div",null,e.React.createElement(C,{fillColour:s,setFillColour:c,outlineColour:d,setOutlineColour:p}),e.React.createElement("div",{className:"mt-4 drag-area-container padding-bottom-20"},e.React.createElement(t.Label,{for:I,className:"drag-area text-center"},e.React.createElement("div",{className:"font-14"},"Drag data here or browse to upload"),e.React.createElement("div",{className:"upload-btn-container w-50",title:"Upload"},e.React.createElement(t.Label,{for:x,className:"upload-btn text-center mt-4 mb-0 text-truncate"},e.React.createElement(l,{size:15,className:"mr-2"}),e.React.createElement("span",null,"Upload")),e.React.createElement(t.Input,{disabled:b,id:x,title:"",className:"upload-btn-file-input",type:"file",accept:Y,onChange:Q}))),e.React.createElement(t.Input,{disabled:b,id:I,onClick:y,title:"",className:"drag-area-file-input",type:"file",accept:Y,onChange:Q})),e.React.createElement("div",{className:"supported-type-icons d-flex justify-content-around align-items-center px-6 mb-4"},e.React.createElement(t.Icon,{width:13,height:16,icon:u(909)}),e.React.createElement(t.Icon,{width:24,height:24,icon:u(254)}),e.React.createElement(t.Icon,{width:32,height:32,icon:u(605)}),e.React.createElement(t.Icon,{width:24,height:24,icon:u(660)}),e.React.createElement(t.Icon,{width:13,height:16,icon:u(909)})),A&&e.React.createElement("div",{className:"padding-all"},e.React.createElement(R,{responseType:"dataUploadFailed",onClose:()=>{T(null),w(!1),L(!1)},textMessage:j})),g&&e.React.createElement("div",{className:"upload-loading-container",title:"File is uploading"},e.React.createElement("div",{className:"upload-loading-content"},e.React.createElement(t.Loading,{className:"upload-loading",type:"PRIMARY",width:30,height:28}),e.React.createElement("div",{className:"upload-loading-file-name d-flex justify-content-center align-items-center"},e.React.createElement("div",{className:"w-100 font-14 text-center"},"File is uploading")),e.React.createElement("div",{className:"upload-loading-btn d-flex justify-content-center"},e.React.createElement(t.Button,{type:"danger",onClick:()=>{E.current.push(N.current),N.current=null,m(!1)}},"Cancel")))))},{useSelector:Q}=e.ReactRedux,G=a=>{const o=e.hooks.useTranslation(t.defaultMessages,e.defaultMessages),r=Q((e=>e.dataSourcesInfo)),n=e.i18n.getIntl();return e.React.createElement("div",{className:"data-list",role:"list"},a.uploadedDataOptions.map(((i,l)=>{var s;const c=g(i.dataSourceJson.id),d=null==r?void 0:r[i.dataSourceJson.id],u=d?d.instanceStatus===e.DataSourceStatus.CreateError:!c&&!a.isLoading,p=d?d.instanceStatus===e.DataSourceStatus.NotCreated:!c&&a.isLoading,m=i.dataSourceJson.label||i.dataSourceJson.sourceLabel;return e.React.createElement("div",{key:i.dataSourceJson.id,className:(0,e.classNames)("d-flex justify-content-between align-items-center data-item",{"pt-3":0!==l}),role:"listitem","aria-label":m},e.React.createElement("div",{className:"flex-grow-1 text-truncate d-flex justify-content-start align-items-center"},p&&e.React.createElement("div",{className:"flex-shrink-0 d-flex justify-content-center align-items-center mr-1 data-item-loading"},e.React.createElement(t.Loading,{type:t.LoadingType.Donut,width:16,height:16})),e.React.createElement("div",{className:"flex-grow-1 text-truncate d-flex align-items-center",title:e.dataSourceUtils.getDsTypeString(null===(s=i.dataSourceJson)||void 0===s?void 0:s.type,n)},!p&&e.React.createElement("div",{className:"flex-shrink-0 d-flex justify-content-center align-items-center data-thumbnail"},e.React.createElement(t.Icon,{icon:e.dataSourceUtils.getDsIcon((0,e.Immutable)(i.dataSourceJson)),color:"#FFFFFF",size:"12"})),u&&e.React.createElement(t.Alert,{className:"flex-shrink-0",buttonType:"tertiary",form:"tooltip",size:"small",type:"error",text:o("dataSourceCreateError")}),e.React.createElement("div",{className:(0,e.classNames)("flex-grow-1 text-truncate data-label",{"pl-2":!u}),title:m},m))))})),e.React.createElement("div",{className:"centered-container-row-flex padding-all"},e.React.createElement("span",{className:"padding-right"},e.React.createElement(t.Button,{type:"primary",size:"sm",onClick:()=>{a.uploadedDataOptions.map(((e,t)=>{a.onAddLayer(e.dataSourceJson.id)}))},title:"Add Layer","aria-label":"Add Layer"},"Add my layer")),e.React.createElement(t.Button,{type:"danger",size:"sm",icon:!0,onClick:()=>{console.log("user clicked cancel"),a.uploadedDataOptions.map(((e,t)=>{a.onRemoveData(e.dataSourceJson.id),console.log("removed layer ",e.dataSourceJson.label)}))},title:"Cancel","aria-label":"Cancel"},"Cancel")))},J=()=>a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"padding-top-20 padding-left padding-right padding-bottom-20"},a.default.createElement(t.Alert,{"aria-live":"polite",form:"basic",open:!0,size:"medium",fullWidth:!0,style:{width:325},text:"Add your own spatial data to the map\n                    and display the layer in a colour of your choice.\n                    Start by selecting a symbol, then upload one of the supported data formats\n                    (CSV, KML, Shapefile (zipped), or GeoJSON).",type:"info",variant:"contained",withIcon:!0}))),B=t=>{const[o,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),l=e=>{M([e],t.widgetId).catch((e=>{console.error("Failed to remove data source",e)})),r([])};return e.React.createElement("div",{className:"add-data-styler-widget-container"},e.React.createElement(J,null),e.React.createElement(V,{portalUrl:t.portalUrl,widgetID:t.widgetId,onAdd:(e,a,o)=>{i(!0),m(e,t.widgetId,a,o).catch((e=>{console.error("Failed to create data source",e)})).finally((()=>{i(!1)})),r(e)}}),o.length>0&&e.React.createElement(G,{uploadedDataOptions:o,setUploadedDataOptions:r,enableDataAction:t.enableDataAction,isLoading:n,widgetId:t.widgetId,onRemoveData:l,onAddLayer:e=>{const a=g(e);console.log(a),t.jmv.view.map.add(a.layer);const o=t.jmv.view.map.findLayerById(a.layer.id);o.on("layerview-create",(e=>{o.fullExtent&&t.jmv.view.goTo(o.fullExtent).catch((e=>{console.error("Error zooming to layer extent:",e)}))})),l(e)}}))},Z={_widgetLabel:"Add Data",urlType:"Type",arcgisUrl:"ArcGIS Server Web Service",csvUrl:"CSV Layer",geojsonUrl:"GeoJSON Layer",kmlUrl:"KML Layer",wfsUrl:"WFS OGC Web Service",wmsUrl:"WMS OGC Web Service",wmtsUrl:"WMTS OGC Web Service",dropOrBrowse:"Drop or browse",defaultPlaceholderText:"There is currently no added data.",dropOrBrowseToUpload:"Drop or browse to upload",upload:"Upload",notSupportedFileTypeError:"The file type of {fileName} is not supported.",failedToUploadError:"The file {fileName} cannot be successfully uploaded.",exceedMaxSizeError:"The file size exceeds the maximum limit.",exceedMaxRecordsError:"The number of records exceeds the maximum threshold.",cannotBeAddedError:"{layerName} cannot be added. Support for adding this type is not yet available.",supportedTypesHint:"Supported formats: Shapefile, CSV, KML, GeoJSON, GPX.",fileIsUploading:"{fileName} is uploading",clickToAddData:"Click to add data",sampleUrl:"Sample URL"};var H=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const K=e.dataSourceUtils.dataSourceJsonCreator;var _;!function(e){e.NotSupportedType="addDataErrorNotSupported",e.FailedToFetch="invalidResourceItem",e.CannotBeAdded="cannotBeAddedError"}(_||(_={}));const{useState:q,useMemo:$,useRef:X,useEffect:ee}=e.React;var te;!function(e){e.ArcGISWebService="arcgisUrl",e.WMS="wmsUrl",e.WMTS="wmtsUrl",e.WFS="wfsUrl",e.KML="kmlUrl",e.CSV="csvUrl",e.GeoJSON="geojsonUrl"}(te||(te={}));const ae={[te.ArcGISWebService]:"https://services.arcgis.com/P3ePLMYs2RVChkJx/arcgis/rest/services/World_Cities/FeatureServer/0",[te.WMS]:"https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi?service=WMS&request=GetCapabilities",[te.WMTS]:"https://wayback.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/WMTS/1.0.0/default028mm/MapServer/tile/45134/%7Blevel%7D/%7Brow%7D/%7Bcol%7D",[te.WFS]:"https://dservices.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/services/JapanPrefectures2018/WFSServer",[te.KML]:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_month_age_animated.kml",[te.CSV]:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_week.csv",[te.GeoJSON]:"https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_hour.geojson"},oe=["https"],re=a=>{const{portalUrl:o,widgetID:r,onAddURL:n}=a,i=e.hooks.useTranslation(e.defaultMessages,t.defaultMessages,Z),[l,s]=q(te.ArcGISWebService),[c,d]=q({value:"",valid:!0}),[u,p]=q(!1),g=X(null),[m,M]=q([]),y=$((()=>m.length>0?Math.max(...m.map((e=>e.order)))+1:0),[m]),[v,S]=q(!1),[h,D]=q(null),[I,x]=q(!1),[N,E]=q(!1),j=$((()=>{const e={};return Object.values(te).forEach((t=>{e[t]=i(t)})),e}),[i]),T=e=>{e.target.value!==l&&(s(e.target.value),d({value:"",valid:c.valid}))},A=t=>{const a=function(t,a){if(!t||!a)return!0;return a!==te.ArcGISWebService?/^https:\/\//.test(t):e.dataSourceUtils.isSupportedArcGISService(t)||ne(t)}(t,l);return{valid:a,msg:!a&&i("invalidUrlMessage")}};ee((()=>{v&&m.length>0&&(a.onAddURL(m),M([]),S(!1))}),[v,m]),ee((()=>{console.log("errMsg changed"),console.log(h),h&&h.length>0&&(x(!0),E(!0))}),[h]);return e.React.createElement("div",{className:"data-url-input w-100 h-100 p-4",css:le},e.React.createElement("div",null,e.React.createElement("div",{className:"url-input-label"},i("urlType")),e.React.createElement(t.Dropdown,{className:"w-100"},e.React.createElement(t.DropdownButton,{size:"sm",className:"text-left","aria-label":i("urlType")},j[l]),e.React.createElement(t.DropdownMenu,null,Object.keys(j).map(((a,o)=>e.React.createElement(t.DropdownItem,{key:o,value:a,onClick:T},j[a])))))),e.React.createElement("div",{className:"mt-4"},e.React.createElement("div",{className:"url-input-label"},i("url")),e.React.createElement(t.UrlInput,{className:(0,e.classNames)({"with-error":!c.valid}),height:80,schemes:oe,value:c.value,checkValidityOnChange:A,checkValidityOnAccept:A,onChange:e=>{d(e)},"aria-label":i("url")})),e.React.createElement("div",{className:"mt-4"},e.React.createElement(t.Button,{onClick:()=>H(void 0,void 0,void 0,(function*(){var t;const a=null==c?void 0:c.value;if(a)try{p(!0);const t=yield function(t,a,o){return H(this,void 0,void 0,(function*(){return a&&o?(a=a.replace(/^http:/,"https:"),Object.keys(ie).some((e=>e===o))?{id:t,type:ie[o],sourceLabel:a.split("?")[0].split("/").filter((e=>!!e)).reverse()[0],url:a}:o===te.ArcGISWebService?ne(a=a.split("?")[0])?function(t,a){return H(this,void 0,void 0,(function*(){if(!t||!a)return Promise.reject(_.NotSupportedType);const o=t.match(/(?<portalUrl>.+)content\/items\/.+\/resources\/styles\/root.json/).groups.portalUrl,r=t.match(/.+\/content\/items\/(?<itemId>.+)\/resources\/styles\/root.json/).groups.itemId,n=yield e.requestUtils.requestWrapper(o,(t=>e.esri.restPortal.getItem(r,{portal:o,authentication:t})));return"Vector Tile Service"!==n.type?Promise.reject(_.NotSupportedType):{id:a,type:e.DataSourceTypes.VectorTileService,sourceLabel:n.title,url:t,itemId:r,portalUrl:o.replace("/sharing/rest/","")}}))}(a,t):function(t,a){return H(this,void 0,void 0,(function*(){var o,r,n,i;if(!t||!a)return Promise.reject(_.NotSupportedType);const l=yield e.ServiceManager.getInstance().fetchServiceInfo(t).then((e=>e.definition));if(e.dataSourceUtils.isSupportedWholeArcGISService(t)&&K.getDataSourceTypeFromArcGISWholeServiceUrl(t)===e.DataSourceTypes.FeatureService){if(1===((null==l?void 0:l.layers)||[]).concat((null==l?void 0:l.tables)||[]).length&&(1===(null===(o=null==l?void 0:l.layers)||void 0===o?void 0:o.length)&&(null===(n=null===(r=null==l?void 0:l.layers)||void 0===r?void 0:r[0])||void 0===n?void 0:n.type)===e.SupportedLayerServiceTypes.FeatureLayer||1===(null===(i=null==l?void 0:l.tables)||void 0===i?void 0:i.length))){return function(t,a,o,r,n,i){var l,s,c;const d=((null==a?void 0:a.layers)||[]).concat((null==a?void 0:a.tables)||[]),u=`${(null===(l=d[0])||void 0===l?void 0:l.id)||0}`,p=`${t}/${u}`,g={id:o,type:e.DataSourceTypes.FeatureLayer,url:p,layerId:u,sourceLabel:r||(null===(s=d[0])||void 0===s?void 0:s.name),geometryType:null===(c=d[0])||void 0===c?void 0:c.geometryType};return n&&(g.itemId=n),i&&(g.portalUrl=i),g}(t.split("?")[0].replace(/^http:/,"https:").replace(/\/$/,""),l,a)}}return function(e,t,a){var o;const r=null===(o=K.createDataSourceJsonByLayerDefinition(e,a,t))||void 0===o?void 0:o.asMutable({deep:!0});if(r)return r;throw new Error(_.FailedToFetch)}(a,t,l)}))}(a,t):Promise.reject(_.NotSupportedType)):Promise.reject("Need URL.")}))}(f(r,y),a,l);if(g.current=t,t.type===e.DataSourceTypes.GroupLayer)throw new Error(_.CannotBeAdded);if(t){M([{dataSourceJson:t,order:y}])}}catch(e){e.message===_.NotSupportedType?D(i(_.NotSupportedType)):e.message===_.CannotBeAdded?D(i(_.CannotBeAdded,{layerName:null===(t=g.current)||void 0===t?void 0:t.sourceLabel})):D(i(_.FailedToFetch))}finally{S(!0),g.current=null,p(!1)}})),type:"primary",disabled:!c.value||!c.valid||N,className:"px-4 w-55",title:"OK","aria-label":"OK"},"OK"),e.React.createElement("span",{className:"padding-left"},e.React.createElement(t.Button,{onClick:e=>{d({value:"",valid:c.valid})},type:"secondary",disabled:!c.value,className:"px-4 w-45",title:"Clear","aria-label":"Clear"},"Clear"))),e.React.createElement("div",{className:"mt-4"},e.React.createElement("div",{className:"url-input-label mb-1"},i("sampleUrl")),e.React.createElement("div",{className:"sample-url"},ae[l])),I&&e.React.createElement("div",{className:"padding-all"},e.React.createElement(R,{responseType:"dataUploadFailed",onClose:()=>{D(null),x(!1),E(!1)},textMessage:h})),u&&e.React.createElement("div",{className:"upload-loading-container"},e.React.createElement("div",{className:"upload-loading-content"},e.React.createElement(t.Loading,{className:"upload-loading",type:t.LoadingType.Primary,width:30,height:28}))))};function ne(e){return!(!e||!/^https:\/\//.test(e))&&/\/content\/items\/.+\/resources\/styles\/root.json/.test(e)}const ie={[te.CSV]:e.DataSourceTypes.CSV,[te.GeoJSON]:e.DataSourceTypes.GeoJSON,[te.KML]:e.DataSourceTypes.KML,[te.WFS]:e.DataSourceTypes.WFS,[te.WMS]:e.DataSourceTypes.WMS,[te.WMTS]:e.DataSourceTypes.WMTS};const le=e.css`
  position: relative;
  overflow: auto;
`,se=()=>a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"padding-top-20 padding-left padding-right padding-bottom-20"},a.default.createElement(t.Alert,{"aria-live":"polite",form:"basic",open:!0,size:"medium",fullWidth:!0,style:{width:325},text:"Add online spatial data  \n              to the map. Start by selecting from the \n              supported data types then enter \n              the URL.",type:"info",variant:"contained",withIcon:!0})));var ce=u(633);const de=t=>{const[o,r]=(0,a.useState)([]),[n,i]=(0,a.useState)(!1),l=e=>{M([e],t.widgetId).catch((e=>{console.error("Failed to remove data source",e)})),console.log("hit removed data button. multiDataOptions in widget tsx is:"),console.log(o),r([])};return e.React.createElement("div",{className:"add-data-styler-widget-container"},e.React.createElement(se,null),e.React.createElement(re,{portalUrl:t.portalUrl,widgetID:t.widgetId,onAddURL:e=>{i(!0),console.log(e),m(e,t.widgetId).catch((e=>{console.error("Failed to create data source",e)})).finally((()=>{i(!1)})),r(e)}}),o.length>0&&e.React.createElement(G,{uploadedDataOptions:o,setUploadedDataOptions:r,enableDataAction:t.enableDataAction,isLoading:n,widgetId:t.widgetId,onRemoveData:l,onAddLayer:e=>{const a=g(e);if(void 0===a.layer&&void 0!==a.restLayer){console.log("layer is undefined");const e=a.restLayer,t=new ce.default(Object.assign({},e));a.layer=t}t.jmv.view.map.add(a.layer);const o=t.jmv.view.map.findLayerById(a.layer.id);o.on("layerview-create",(e=>{o.fullExtent&&t.jmv.view.goTo(o.fullExtent).catch((e=>{console.error("Error zooming to layer extent:",e)}))})),l(e)}}))},ue=r=>{var n;const{portalUrl:i,id:l,enableDataAction:s=!0,config:c,mutableStateProps:d}=r,[u,p]=(0,a.useState)();return e.React.createElement("div",{className:"add-data-styler-widget-container"},r.useMapWidgetIds&&1===r.useMapWidgetIds.length&&e.React.createElement(o.JimuMapViewComponent,{useMapWidgetId:null===(n=r.useMapWidgetIds)||void 0===n?void 0:n[0],onActiveViewChange:e=>{e&&p(e)}}),e.React.createElement(t.Tabs,{defaultValue:"upload-data",fill:!0,keepMount:!0,onChange:()=>{},onClose:()=>{},type:"tabs"},e.React.createElement(t.Tab,{id:"upload-data",title:"Upload data"},e.React.createElement(B,{widgetId:l,jmv:u,portalUrl:i,enableDataAction:s})),e.React.createElement(t.Tab,{id:"add-url",title:"Add URL"},e.React.createElement(de,{widgetId:l,jmv:u,portalUrl:i,enableDataAction:s}))))};function pe(e){u.p=e}})(),p})())}}}));